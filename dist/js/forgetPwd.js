!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=357)}({357:function(e,t,n){e.exports=n(358)},358:function(e,t){function n(){return $(".selected-dial-code").text().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function o(){return $('input[name="setNum"]').val()}function r(e,t){if(""==t)return"请输入手机号码";var n=e+t;return"+86"===e&&(n=t),!!objSite.phoneRegular(e).test(n)||"手机号码格式错误"}$((function(){var e,t;function i(){parent.layer.closeAll(),parent.openLogin()}e=$("#setNum"),t=e.data("area"),e.val()||e.intlTelInput({initialCountry:t,preferredCountries:["cn","us"],separateDialCode:!0}),$(".passwordActive").on("click",(function(e){$(this).toggleClass("show");var t=$(this).hasClass("show"),n=$(this).siblings(".input-pwd");t?n[0].setAttribute("type","text"):n[0].setAttribute("type","password")})),$("#setNum").on("keyup",(function(e){var t=$(this).val().replace(/\D+/g,"");$(this).val(t),t.length>0?$(".js_GetTelcode").addClass("active"):$(".js_GetTelcode").removeClass("active")})),$("#toLoginBtn").on("click",(function(e){i()})),$(".js_BackLogin").on("click",(function(e){i()})),$(document).on("input propertychange",(function(){var e={},t=$(".bind-form").serializeArray();$.each(t,(function(){e[this.name]=this.value})),e.setNum.length>0&&e.setPwd.length>=6&&e.setCode.length>0?$("#setPwdBtn").addClass("login-btn-active"):$("#setPwdBtn").removeClass("login-btn-active")}));var a=!1,s=!1;function c(){var e=n(),t=o(),r=$('input[name="setCode"]').val(),i=$('input[name="setPwd"]').val();if(""===t)return layer.msg("请输入手机号"),!1;if(""===i)return layer.msg("请输入密码"),!1;if(i.length>20||i.length<6)return layer.msg("请输入6-20位密码"),!1;if(""===r)return layer.msg("请输入验证码"),!1;var a={phone:t,password:i?window.btoa(encrypt("password",i)):"",area_code:e,captcha:r};$.post("/login/password_login/setPassword",a,(function(e){console.log(e),0==e.code?(layer.msg("重置成功"),$(".login-container").hide(),$(".set-success-container").show()):layer.msg(e.msg)}))}new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("sendYzm"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(e,t){var i=e.token,c=e.authenticate,l=o(),u=n(),d=r(u,l);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);var f=$("#sendYzm>span");$.post("/login/password_login/getResetPwdCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:l,area_code:u,authenticate:c,token:i},(function(e){if(layer.msg(e.msg),layer.closeAll("loading"),0==e.code){s=!1,a=!0,2;var t=60;f.text(t+"s后获取");var n=setInterval((function(){t--,f.text(t+"s后获取"),0==t&&(a=!1,clearInterval(n),f.text("获取验证码"))}),1e3)}})),t()},onFail:function(e,t,n){n()},beforeStart:function(e){if(a||s)return layer.msg("操作频繁，请稍等"),!1;var t=r(n(),o());if("string"==typeof t)return layer.msg(t),!1;e()},onExit:function(){}}),new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("voiceBtn"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(e,t){var i=e.token,c=e.authenticate,l=o(),u=n(),d=r(u,l);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);$.post("/login/password_login/getResetPwdVoiceCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:l,area_code:u,authenticate:c,token:i},(function(e){if(layer.msg(e.msg),layer.closeAll("loading"),0==e.code){a=!1,s=!0,1,$(".bind-form .sendYzmvoice").text("60s"),$(".bind-form .yzm-voice-1").hide(),$(".bind-form .yzm-voice-2").show();var t=60,n=null;n=setInterval((function(){t--,$(".bind-form .sendYzmvoice").text(t+"s"),0==t&&(s=!1,clearInterval(n),$(".bind-form .yzm-voice-2").hide(),$(".bind-form .yzm-voice-1").show())}),1e3)}})),t()},onFail:function(e,t,n){n()},beforeStart:function(e){if(a||s)return layer.msg("操作频繁，请稍等"),!1;var t=r(n(),o());if("string"==typeof t)return layer.msg(t),!1;e()},onExit:function(){}}),$(".bind-form").on("keydown",(function(e){13===e.keyCode&&$("#setPwdBtn").hasClass("login-btn-active")&&c()})),$(document).on("click","#setPwdBtn",(function(e){if(e.preventDefault(),!$(this).hasClass("login-btn-active"))return!1;c()}))}))}});