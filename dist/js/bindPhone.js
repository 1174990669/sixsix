!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=348)}({348:function(e,n,t){e.exports=t(349)},349:function(e,n){function t(){return $(".selected-dial-code").text().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function o(){return $('input[name="bindNum"]').val()}function r(e,n){if(""==n)return"请输入手机号码";var t=e+n;return"+86"===e&&(t=n),!!objSite.phoneRegular(e).test(t)||"手机号码格式错误"}$((function(){var e,n;e=$("#bindNum"),n=e.data("area"),e.val()||e.intlTelInput({initialCountry:n,preferredCountries:["cn","us"],separateDialCode:!0}),$("#bindNum").on("keyup",(function(e){var n=$(this).val().replace(/\D+/g,"");$(this).val(n),n.length>0?$(".js_GetTelcode").addClass("active"):$(".js_GetTelcode").removeClass("active")}));var i=-1;$(".js_SkipBind").on("click",(function(e){i=layer.open({type:1,area:["auto","auto"],title:!1,closeBtn:0,shadeClose:!0,skin:"my-close-skin",content:$("#skipTipsDialog"),success:function(e){}})})),$(".js_SureSkip").on("click",(function(e){window.parent.postMessage({closeAll:1},"*")})),$(".js_CancelDialog").on("click",(function(e){layer.close(i)})),$(document).on("input propertychange",(function(){var e={},n=$(".bind-form").serializeArray();$.each(n,(function(){e[this.name]=this.value})),e.bindNum.length>0&&e.bindCode.length>0?$("#bindBtn").addClass("login-btn-active"):$("#bindBtn").removeClass("login-btn-active")}));var a=!1,c=!1;function l(){var e=t(),n=o(),r=$('input[name="bindCode"]').val();if(""===n)return layer.msg("请输入手机号"),!1;if(""===r)return layer.msg("请输入验证码"),!1;var i={phone:n,area_code:e,captcha:r};$.post("/user/user/bindPhone",i,(function(e){console.log(e),0==e.code?(parent.layer.closeAll(),parent.layer.msg("绑定成功")):layer.msg(e.msg)}))}new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("sendYzm"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(e,n){var i=e.token,l=e.authenticate,s=o(),u=t(),d=r(u,s);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);var f=$("#sendYzm>span");$.post("/user/user/getBindPhoneCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:s,area_code:u,authenticate:l,token:i},(function(e){if(layer.msg(e.msg),layer.closeAll("loading"),0==e.code){c=!1,a=!0,2;var n=60;f.text(n+"s后获取");var t=setInterval((function(){n--,f.text(n+"s后获取"),0==n&&(a=!1,clearInterval(t),f.text("获取验证码"))}),1e3)}})),n()},onFail:function(e,n,t){t()},beforeStart:function(e){if(a||c)return layer.msg("操作频繁，请稍等"),!1;var n=r(t(),o());if("string"==typeof n)return layer.msg(n),!1;e()},onExit:function(){}}),new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("voiceBtn"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(e,n){var i=e.token,l=e.authenticate,s=o(),u=t(),d=r(u,s);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);$.post("/user/user/getBindPhoneVoiceCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:s,area_code:u,authenticate:l,token:i},(function(e){if(layer.msg(e.msg),layer.closeAll("loading"),0==e.code){a=!1,c=!0,1,$(".bind-form .sendYzmvoice").text("60s"),$(".bind-form .yzm-voice-1").hide(),$(".bind-form .yzm-voice-2").show();var n=60,t=null;t=setInterval((function(){n--,$(".bind-form .sendYzmvoice").text(n+"s"),0==n&&(c=!1,clearInterval(t),$(".bind-form .yzm-voice-2").hide(),$(".bind-form .yzm-voice-1").show())}),1e3)}})),n()},onFail:function(e,n,t){t()},beforeStart:function(e){if(a||c)return layer.msg("操作频繁，请稍等"),!1;var n=r(t(),o());if("string"==typeof n)return layer.msg(n),!1;e()},onExit:function(){}}),$(".bind-form").on("keydown",(function(e){13===e.keyCode&&$("#bindBtn").hasClass("login-btn-active")&&l()})),$(document).on("click","#bindBtn",(function(e){if(e.preventDefault(),!$(this).hasClass("login-btn-active"))return!1;l()}))}))}});