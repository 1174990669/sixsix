!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=364)}({364:function(e,n,t){e.exports=t(365)},365:function(e,n){function t(e){n=window.parent.document.URL,encodeURIComponent(n);var n,t=$('input[name="login_type"]').val();if(void 0===t||"account"!==t&&"phone_code"!==t)return!1;var o=l(),r=c(),i=g(),d=a()?$('input[name="loginNum"]').val():$('input[name="registerNum"]').val(),f=s(),m=1;if("account"===t){if(m=1,""===d)return layer.msg("请输入账号"),!1;if(""===f)return layer.msg("请输入密码"),!1;if(f.length>20||f.length<6)return layer.msg("请输入6-20位密码"),!1}else{m=2;var p=u(o,r);if("string"==typeof p)return layer.msg(p),!1;if(""===i)return layer.msg("请输入短信验证码"),!1}$('input[name="login_source"]').val(),a();var v={account:d,password:f?window.btoa(encrypt("password",f)):"",type:m,area_code:o,captcha:i};$.post("/login/password_login/login",v,(function(e){0==e.code?(layer.msg("登录成功"),parent.window.location.reload(),parent.window.objSite.loginInHtml(e.data)):403==e.code?layer.msg(obj.msg,{time:2e3},(function(){})):layer.msg(e.msg)}))}$((function(){function e(e){var n=e.data("area");e.val()||e.intlTelInput({initialCountry:n,preferredCountries:["cn","us"],separateDialCode:!0})}e($("#telNumber")),e($("#registerNum"))})),$((function(){var e=!1,n=!1,o=0;new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("sendLoginYzm"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(t,r){var i=t.token,a=t.authenticate,s=c(),g=l(),d=u(g,s);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);var f=$("#sendLoginYzm>span");$.post("/login/password_login/getLoginCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:s,area_code:g,authenticate:a,token:i},(function(t){if(layer.msg(t.msg),layer.closeAll("loading"),0==t.code){n=!1,e=!0,o=2;var r=60;f.text(r+"s后获取");var i=setInterval((function(){r--,f.text(r+"s后获取"),0==r&&(e=!1,clearInterval(i),f.text("获取验证码"))}),1e3)}})),r()},onFail:function(e,n,t){t()},beforeStart:function(t){if(e||n)return layer.msg("操作频繁，请稍等"),!1;var o=u(l(),c());if("string"==typeof o)return layer.msg(o),!1;t()},onExit:function(){}}),new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("loginVoiceBtn"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(t,r){var i=t.token,a=t.authenticate,s=c(),g=l(),d=u(g,s);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);$.post("/login/password_login/getLoginVoiceCaptcha",{m:encrypt("validate","voiceCodeForLogin"),phone:s,area_code:g,authenticate:a,token:i},(function(t){if(layer.msg(t.msg),layer.closeAll("loading"),0==t.code){e=!1,n=!0,o=1,$(".login-form .sendYzmvoice").text("60s"),$(".login-form .yzm-voice-1").hide(),$(".login-form .yzm-voice-2").show();var r=60,i=null;i=setInterval((function(){r--,$(".login-form .sendYzmvoice").text(r+"s"),0==r&&(n=!1,clearInterval(i),$(".login-form .yzm-voice-2").hide(),$(".login-form .yzm-voice-1").show())}),1e3)}})),r()},onFail:function(e,n,t){t()},beforeStart:function(t){var o=l(),r=c();if("+86"!==o)return layer.msg("很抱歉，语音验证码服务暂时不支持该区域，请尝试使用短信验证码"),!1;if(e||n)return layer.msg("操作频繁，请稍等"),!1;var i=u(o,r);if("string"==typeof i)return layer.msg(i),!1;t()},onExit:function(){}}),new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("sendRegisterYzm"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(t,r){var i=t.token,a=t.authenticate,s=c(),g=l(),d=u(g,s);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);var f=$("#sendRegisterYzm>span");$.post("/login/register/getRegisterCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:s,area_code:g,authenticate:a,token:i},(function(t){if(layer.msg(t.msg),layer.closeAll("loading"),0==t.code){n=!1,e=!0,o=2;var r=60;f.text(r+"s后获取");var i=setInterval((function(){r--,f.text(r+"s后获取"),0==r&&(e=!1,clearInterval(i),f.text("获取验证码"))}),1e3)}})),r()},onFail:function(e,n,t){t()},beforeStart:function(t){if(e||n)return layer.msg("操作频繁，请稍等"),!1;var o=u(l(),c());if("string"==typeof o)return layer.msg(o),!1;t()},onExit:function(){}}),new YpRiddler({expired:10,mode:"dialog",container:document.getElementById("registerVoiceBtn"),appId:"cd6822d29e88459394bf172cc94ca46d",version:"v1",noButton:!0,winWidth:350,onError:function(e){429!=e.code?layer.msg("验证服务异常"):layer.msg("请求过于频繁，请稍后再试！")},onSuccess:function(t,r){var i=t.token,a=t.authenticate,s=c(),g=l(),d=u(g,s);if("string"==typeof d)return layer.msg(d),!1;layer.load(2);$.post("/login/register/getRegisterVoiceCaptcha",{m:encrypt("validate","smsCodeForLogin"),phone:s,area_code:g,authenticate:a,token:i},(function(t){if(layer.msg(t.msg),layer.closeAll("loading"),0==t.code){e=!1,n=!0,o=1,$(".register-form .sendYzmvoice").text("60s"),$(".register-form .yzm-voice-1").hide(),$(".register-form .yzm-voice-2").show();var r=60,i=null;i=setInterval((function(){r--,$(".register-form .sendYzmvoice").text(r+"s"),0==r&&(n=!1,clearInterval(i),$(".register-form .yzm-voice-2").hide(),$(".register-form .yzm-voice-1").show())}),1e3)}})),r()},onFail:function(e,n,t){t()},beforeStart:function(t){if(e||n)return layer.msg("操作频繁，请稍等"),!1;var o=u(l(),c());if("string"==typeof o)return layer.msg(o),!1;t()},onExit:function(){}}),$(document).on("click","#loginBtn",(function(e){if(e.preventDefault(),!$(this).hasClass("login-btn-active"))return!1;t(o)})),$(document).on("click","#registerBtn",(function(e){if(e.preventDefault(),!$(this).hasClass("login-btn-active"))return!1;i()})),$(document).on("click",".js_LoginForget",(function(){parent.layer.closeAll(),parent.objSite.openUserWin("/login/login/forgetPwd")})),$(".login-form").on("keydown",(function(e){13===e.keyCode&&$("#loginBtn").hasClass("login-btn-active")&&t()})),$(".register-form").on("keydown",(function(e){13===e.keyCode&&$("#registerBtn").hasClass("login-btn-active")&&i()}))})),$(document).on("input propertychange",(function(){if(a()){var e={},n=$(".login-form").serializeArray();$.each(n,(function(){e[this.name]=this.value})),e.loginNum.length>0&&e.loginPwd.length>=6||e.loginNum.length>0&&e.loginCode.length>0?$("#loginBtn").addClass("login-btn-active"):$("#loginBtn").removeClass("login-btn-active")}else{e={},n=$(".register-form").serializeArray();$.each(n,(function(){e[this.name]=this.value})),e.registerNum.length>0&&e.registerCode.length>0&&e.registerPwd.length>=6?$("#registerBtn").addClass("login-btn-active"):$("#registerBtn").removeClass("login-btn-active")}}));var o=null;function r(e){var n;e?($(".qrcode-login-content").show(),$(".tel-login-content").hide(),n=function(e){if(0==e.code){var n=e.data.url,t=e.data.key;$(".login-qrcode-wrap > img")[0].setAttribute("src",n),o&&clearInterval(o),o=setInterval((function(){!function(e){var n={key:e};$.ajax({type:"GET",url:"/login/wechat_official/checkLogin",timeout:1e4,data:n,error:function(e,n,t){},success:function(e){0==e.code?(o&&clearInterval(o),objSite.loginInHtml(e.data),parent.window.location.reload()):200==e.code&&(o&&clearInterval(o),layer.msg(e.msg))},complete:function(){}})}(t)}),1e3)}else layer.msg(e.msg)},$.ajax({type:"GET",url:"/login/Wechat_Official/getTicket",timeout:1e4,data:{behavior:"login"},error:function(e,n,t){},success:function(e){n(e)},complete:function(){}})):($(".qrcode-login-content").hide(),$(".tel-login-content").show(),o&&clearInterval(o))}function i(){var e=l(),n=c(),t=g(),o=s();if(""===n)return layer.msg("请输入手机号"),!1;if(""===o)return layer.msg("请输入密码"),!1;if(o.length>20||o.length<6)return layer.msg("请输入6-20位密码"),!1;if(""===t)return layer.msg("请输入验证码"),!1;var r={account:n,password:o?window.btoa(encrypt("password",o)):"",area_code:e,captcha:t};$.post("/login/register/register",r,(function(e){console.log(e),0==e.code?(layer.msg("注册成功"),$(".js_LoginChange > li").eq(0).trigger("click")):layer.msg(e.msg)}))}function a(){return 0==$(".js_LoginChange .active").index()}function l(){return(a()?$(".selected-dial-code").eq(0).text():$(".selected-dial-code").eq(1).text()).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function c(){return a()?$('input[name="loginNum"]').val():$('input[name="registerNum"]').val()}function s(){return a()?$('input[name="loginPwd"]').val():$('input[name="registerPwd"]').val()}function g(){return a()?$('input[name="loginCode"]').val():$('input[name="registerCode"]').val()}function u(e,n){if(""==n)return"请输入手机号码";var t=e+n;return"+86"===e&&(t=n),!!objSite.phoneRegular(e).test(t)||"手机号码格式错误"}$(".wechat-login").on("click",(function(e){$(".js_ChangeLoginWay").trigger("click")})),$(".js_toAccountLogin").on("click",(function(e){$(".js_ChangeLoginWay").trigger("click")})),r($(".js_ChangeLoginWay").hasClass("other")),window.onbeforeunload=function(e){o&&clearInterval(o)},$(".js_ChangeLoginWay").on("click",(function(e){$(this).toggleClass("other");var n=$(this).hasClass("other");$("#loginBtn").removeClass("login-btn-active"),r(n)}))}});